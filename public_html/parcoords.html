<!DOCTYPE html>

 <html>
	<head>
		<title>Parallel Coordinates</title>
<!--		=====================================================================   -->
		<link rel="stylesheet" type="text/css" href="css/d3.parcoords.css">	
		<link rel="stylesheet" type="text/css" href="css/parallelCoordinates.css">
		<link rel="stylesheet" href="css/style.css"/>
<!--		=====================================================================   -->
		<script type="text/javascript" src="./js/jquery-1.8.2.min.js"></script>
		<script src="./js/d3.min.js"></script>
		<script src="./js/d3.parcoords.js"></script>
		<script src="./js/divgrid.js"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>
		<script src="http://d3js.org/queue.v1.min.js"></script>
		<script src="js/RadarChart.js"></script>


<!--		=====================================================================   -->
	</head>

	<body>
<!--		<div>Title</div>-->
		
		<div class="container">
			<div class="title">Map View</div>
			
			<div class="block" id="glyph" align="center">
				<div class="slidingbar" style="display:inline-block;text-align:center;">
					<form>
						<h3> Select year <input type="range" style="width:200; margin: 0 auto;" id="thersholdSlider" name="points" value ="2014" min="2005" max="2014" onchange="select_year(this.value)"> <div id="console-event"></div>
						</h3>
					</form>
				</div>
			</div>

				
				
				
			</div>
			
			<div class="block">
				
				
				<button type="button" class="btn btn-default btn-lg btn-block" id="appear">
					<a href="parcoords.html">Show Parallel Coordinates</a>
				</button>
			</div>
	</div>
		
		
		<div class="wrapper">
			<div id="parallel" class="parallel"> 			
				<div id="example" class="parcoords" style="height:800px; width:auto"></div>
				<div id="grid"></div>				
				<script id="brushing" type='text/javascript'>
					var color = d3.scale.category20(function(d){return d.State});
					var parcoords = d3.parcoords()("#example")
						.color('steelblue')
						.alpha(0.4);
		
		
						var selected_data;
					// load csv file and create the chart
					d3.csv('./csv/state.csv', function(data) {
						selected_data = data.filter(function(row) {
							return row['Income ($)'] >= 50000 && row['Income ($)'] <= 51000;
						})
						
						parcoords
							.data(data)
							.render()
							.brushMode("1D-axes");  // enable brushing
		
						// create data table, row hover highlighting
						var grid = d3.divgrid();
						
						d3.select("#grid")
							.datum(selected_data.slice(0,20)) // make sure all the data points can be included in the chart
							.call(grid)
							.selectAll(".row")
							.on({
								"mouseover": function(d) { parcoords.highlight([d]); },
								"mouseout": parcoords.unhighlight
							});

						// update data table on brush event
						parcoords.on("brush", function(d) {
							d3.select("#grid")
								.datum(d.slice(0,20)) // make sure all the data points can be included in the chart
								.call(grid)
								.selectAll(".row")
								.on({
									"mouseover": function(d) { parcoords.highlight([d]); },
									"mouseout": parcoords.unhighlight
								});
						});
					});

				</script>
			</div>
		</div>
		<script type="text/javascript" src="js/maps.js"></script>
		<script>
		
			$('#console-event').html(2014);

			function select_year(thresh) {
				$('#console-event').html(thresh);

				explorer.update(thresh);
				
			}

		</script>
	</body>
</html>
